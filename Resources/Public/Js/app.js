var BwrkMarkerMap={map:{id:null,options:{center:{lat:null,lng:null},zoom:null,styles:[{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#d3d3d3"}]},{featureType:"transit",stylers:[{color:"#808080"},{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#b3b3b3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{weight:1.8}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ebebeb"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#a7a7a7"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#efefef"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#696969"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#737373"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#d6d6d6"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#dadada"}]}]},googleElement:null},geoCoder:null,distanceMatrix:null,searchBox:null,markers:null,init:function(){var e=document.getElementById(this.map.id);this.map.googleElement=new google.maps.Map(e,this.map.options),this.geoCoder=new google.maps.Geocoder,this.distanceMatrix=new google.maps.DistanceMatrixService,this.searchBox=$("#"+this.map.id).parent(".tx-bwrk-markermap").children(".tx-bwrk-markermap__searchbox");var t=this;this.markers.forEach(function(e,r){var o=new google.maps.Marker({position:e.position,map:t.map.googleElement,title:e.title,icon:e.icon,marker_id:e.uid});o.addListener("click",function(){$.ajax({method:"GET",url:"index.php",data:{eID:"bwrkMarkerWindow","tx_bwrkmarkermap_pi2[uid]":o.marker_id}}).done(function(e){new google.maps.InfoWindow({content:e}).open(t.map.googleElement,o)})})}),this.searchBox.children("form").submit(function(){var e=$(this).find('input[name="tx-bwrk-markermap__searchbox-input"]').val();return t.codeAddress(e),!1})},codeAddress:function(e){var t=this;this.geoCoder.geocode({address:e},function(e,r){if(r==google.maps.GeocoderStatus.OK){var o=e[0],i=t.measureDistance(o.geometry.location),a=new google.maps.Marker({position:i.position}),l=new google.maps.Marker({map:t.map.googleElement,position:o.geometry.location}),s=[];s[0]=l,s[1]=a,t.fitBounds(s)}})},measureDistance:function(e){var t=e.lat(),r=e.lng(),o=6371,a=[],l=-1,s=this;for(i=0;i<this.markers.length;i++){var n=s.markers[i].position.lat,m=s.markers[i].position.lng,f=s.rad(n-t),p=s.rad(m-r),y=Math.sin(f/2)*Math.sin(f/2)+Math.cos(s.rad(t))*Math.cos(s.rad(t))*Math.sin(p/2)*Math.sin(p/2),d=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),c=o*d;a[i]=c,(-1==l||c<a[l])&&(l=i)}return this.markers[l]},rad:function(e){return e*Math.PI/180},fitBounds:function(e){for(var t=new google.maps.LatLngBounds,r=0;r<e.length;r++)t.extend(e[r].getPosition());this.map.googleElement.fitBounds(t)}};
//# sourceMappingURL=app.js.map
